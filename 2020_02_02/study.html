<!DOCTYPE html>
<html>
<head>
    <meta>
        <style>
        </style>
</head>
    <body>
        <script>
            // //1.함수 공장 설치
            // function makeAdder(x) {
            //     //2. 외부함수의 지역변수 선언
            //     var y = 1;
            //     //3 makeAdder()함수가 특정한 인자로 가질 수 있는 함수들을 리턴
            //     return function(z) {
            //         //4. 외부함수의 지역변수에 접근
            //         y = 100;
            //         return x + y + z;
            //     };
            // }

            // //5. 사용할 함수 만들기 (클로저)
            // var add5 = makeAdder(5);
            // //add5는 function(z){}를 반환받는다.
            // console.log(add5);
            // var add10 = makeAdder(10);
            // //add10은 function(z){}를 반환받는다.
            // console.log(add10);

            // console.log(add5(2));  // 107 (x:5 + y:100 + z:2)
            // console.log(add10(2)); // 112 (x:10 + y:100 + z:2)

            // function makeSizer(size) {
            // return function() {
            //     document.body.style.fontSize = size + 'px';
            //     };
            // }

            // var size12 = makeSizer(12);
            // // console.log(size12);
            // var size14 = makeSizer(14);
            // var size16 = makeSizer(16);

            // document.getElementById('size-12').onclick = size12;
            // document.getElementById('size-14').onclick = size14;
            // document.getElementById('size-16').onclick = size16;
            
            //카운터를 생성하는 익명 함수를 정의하고 그 함수를 즉시 호출하고 결과를 counter 변수에 할당함.
            var counter = (function() {
            var privateCounter = 0; //function(){}의 지역변수
            function changeBy(val) {  
                //privateCounter = (privateCounter + value)  
                privateCounter += val;
            }
            //객체를 반환하는데...
            return {
                //퍼블릭 함수1(클로저1)
                increment: function() {
                changeBy(1);
                },
                //퍼블릭 함수2(클로저2)
                decrement: function() {
                changeBy(-1);
                },
                //퍼블릭 함수3(클로저3)
                value: function() {
                return privateCounter;
                }
            };   
            })();
            
            // var counter1 = makeCounter();
            // var counter2 = makeCounter();
            console.log(counter.value()); // logs 0
            counter.increment();
            counter.increment();
            console.log(counter.value()); // logs 2
            counter.decrement();
            console.log(counter.value()); // logs 1
        </script>    
    </body>
</html>